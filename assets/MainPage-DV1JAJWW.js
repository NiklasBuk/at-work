import{j as s,L as _,t as x,r as g,a as l,b as v,c as f,s as U}from"./index-DEA51arC.js";import{u as h,a as p}from"./hooks-CyC6JdXf.js";const w={USERS:{GET_USERS_LIST:"/users"}},S="https://jsonplaceholder.typicode.com/",m=({children:e})=>s.jsx("div",{className:"dropdown-container",children:e}),N=({user:e})=>{const r=h();return s.jsxs(m,{children:[s.jsx(_,{to:`/users/${e.id}`,children:s.jsx("span",{children:"Редактировать"})}),s.jsx("span",{onClick:()=>r(x(e)),children:"Архивировать"}),s.jsx("span",{onClick:()=>r(g(e.id)),children:"Скрыть"})]})},E=({user:e})=>{const r=h();return s.jsx(m,{children:s.jsx("span",{onClick:()=>r(x(e)),children:"Активировать"})})},A=({user:e})=>{const[r,o]=l.useState(!1),i=p(n=>n.users.users.active).find(n=>n.id===e.id);return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"menu_container",onClick:n=>{n.stopPropagation(),o(a=>!a)},children:[s.jsx("span",{className:"menu_dots"}),i&&r&&s.jsx(N,{user:e}),!i&&r&&s.jsx(E,{user:e})]})})},j=({user:e})=>s.jsxs("div",{className:"user-card_container",children:[s.jsx("div",{className:"user-card_avatar",children:s.jsx("img",{src:v,alt:"avatar",loading:"lazy"})}),s.jsxs("div",{className:"user-card_info__wrapper",children:[s.jsxs("div",{className:"user-card_info__top",children:[s.jsxs("div",{className:"user-card_info__top_person",children:[s.jsx("p",{children:e.username}),s.jsx(A,{user:e})]}),s.jsx("p",{children:e.company.name})]}),s.jsx("p",{className:"user-card_info__bottom_address",children:e.address.city})]})]}),R=()=>{const e=h(),[r,o]=l.useState(!1),i=p(a=>{var c,t;return(t=(c=a.users)==null?void 0:c.users)==null?void 0:t.active}),n=p(a=>{var c,t;return(t=(c=a.users)==null?void 0:c.users)==null?void 0:t.archive});return l.useEffect(()=>{document.title="AT-WORK | Users"},[]),l.useEffect(()=>{const a=new AbortController,c=a.signal,t=async()=>{try{o(!0);const d=await fetch(`${S}${w.USERS.GET_USERS_LIST}?_page=0&_limit=6`,{signal:c});if(!d.ok)throw new Error("Не удалось получить список пользователей");const u=await d.json();e(U(u)),o(!1)}catch(d){c.aborted||console.log(d)}};return!(i.length||n.length)&&t(),()=>{a.abort()}},[]),s.jsx(s.Fragment,{children:r?s.jsx(f,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"main-page_category",children:[s.jsx("h1",{children:"Активные"}),s.jsx("div",{className:"main-page_wrapper",children:i.length?i.map(a=>s.jsx(j,{user:a},a.id)):s.jsx("span",{children:"Нет активных пользователей"})})]}),s.jsxs("div",{className:"main-page_category",children:[s.jsx("h1",{children:"Архив"}),s.jsx("div",{className:"main-page_wrapper archive-list",children:n.length?n.map(a=>s.jsx(j,{user:a},a.id)):s.jsx("span",{children:"Нет пользователей в архиве"})})]})]})})};export{R as default};
